<?php
include('session.php');
include('header.html');
include('uploader.php');
?>

<!-- Upload Modal-->
<div class="modal fade" id="uploadModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Seleziona un file csv da caricare</h5>
        <button class="close" type="button" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">Ã—</span>
        </button>
      </div>
      <form name="upload" method="post" action="movements.html" role="form" enctype="multipart/form-data">
      <div class="modal-body">
        <div class="custom-file">
          <input type="file" name="file" class="custom-file-input" id="customFile" required>
          <label class="custom-file-label" for="customFile">Seleziona un file...</label>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
        <input type="submit" name="submit" value="Carica" class="btn btn-primary">
      </div>
    </form>
    </div>
  </div>
</div>

<!-- Filename modal JS -->
<script type="text/javascript" src="js/filename.js"></script>

<!-- Content Wrapper-->
<div id="content-wrapper" class="d-flex flex-column">

<!-- Main Content -->
<div id="content">

<!-- Begin Page Content -->
<div class="container-fluid">

  <!-- Page Heading -->
  <h1 class="h3 mb-2 text-gray-800">Movements</h1>
  <p class="mb-4" style="text-align:right">
    <a href="#" class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm" id='upload' data-toggle="modal" data-target="#uploadModal"><i class="fas fa-upload fa-sm text-white-50"></i> Upload</a>
    <?php
    if($log){
      echo '<a href="import.log" target="_blank" class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm" id="download_log"><i class="fas fa-file-alt fa-sm text-white-50"></i> Download log</a>';
    } ?>
    <a href="#" class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm" id='download'><i class="fas fa-download fa-sm text-white-50"></i> Download</a>
    <a href="#" class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm" id='add'><i class="fas fa-plus fa-sm text-white-50"></i> Add row</a>
    <a href="#" class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm" id='delete'><i class="fas fa-minus fa-sm text-white-50"></i> Delete selected row(s)</a>
  </p>

  <!-- Movements Table -->
  <div class="card shadow mb-4" id="table">
    <div class="card-body">
     <div id="movements-table"></div>
    </div>
  </div>

</div>
<!-- /.container-fluid -->

</div>
<!-- End of Main Content -->

<!-- JS Tabulator -->
<script type="text/javascript" src="js/tabulator/tabulator.js"></script>
<script type="text/javascript" src="js/moment/moment.js"></script>
<script type="text/javascript" src="js/movements.js"></script>
<script type="text/javascript" src="https://oss.sheetjs.com/sheetjs/xlsx.full.min.js"></script>

<?php include('footer.html'); ?>

</body>
</html>